/*!
 * vue-uweb v0.2.1
 * (c) 2019 raychenfj
 * Released under the MIT License.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.VueUweb=t.VueUweb||{})}(this,function(t){"use strict";function e(t){var e=n.call(t),r="[object Arguments]"===e;return r=r||"[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&0<=t.length&&"[object Function]"===n.call(t.callee)}var r,n=Object.prototype.toString;if(!Object.keys){var s=Object.prototype.hasOwnProperty,y=Object.prototype.toString,h=e,o=Object.prototype.propertyIsEnumerable,g=!o.call({toString:null},"toString"),b=o.call(function(){},"prototype"),v=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(t){var e=t.constructor;return e&&e.prototype===t},i={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},m=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!i["$"+t]&&s.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{d(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===y.call(t),n=h(t),o=e&&"[object String]"===y.call(t),i=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var c=b&&r;if(o&&0<t.length&&!s.call(t,0))for(var u=0;u<t.length;++u)i.push(String(u));if(n&&0<t.length)for(var l=0;l<t.length;++l)i.push(String(l));else for(var a in t)c&&"prototype"===a||!s.call(t,a)||i.push(String(a));if(g)for(var p=function(t){if("undefined"==typeof window||!m)return d(t);try{return d(t)}catch(t){return!1}}(t),f=0;f<v.length;++f)p&&"constructor"===v[f]||!s.call(t,v[f])||i.push(v[f]);return i}}var c=r,u=Array.prototype.slice,l=Object.keys,a=l?function(t){return l(t)}:c,p=Object.keys;a.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return e(t)?p(u.call(t)):p(t)}):Object.keys=a;return Object.keys||a};function f(t){return!(O&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===S.call(t)}function w(t){return!!f(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&0<=t.length&&"[object Array]"!==S.call(t)&&"[object Function]"===S.call(t.callee)}var j=a,O="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,S=Object.prototype.toString,E=function(){return f(arguments)}();f.isLegacyArguments=w;function _(t){return t!=t}function $(t,e,r,n){e in t&&(!function(t){return"function"==typeof t&&"[object Function]"===C.call(t)}(n)||!n())||(H?q(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)}function P(t,e){var r=2<arguments.length?arguments[2]:{},n=j(e);R&&(n=M.call(n,Object.getOwnPropertySymbols(e)));for(var o=0;o<n.length;o+=1)$(t,n[o],e[n[o]],r[n[o]])}var k=E?f:w,x=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!_(t)||!_(e))},A=Array.prototype.slice,I=Object.prototype.toString,D=(Function.prototype.bind||function(e){var r=this;if("function"!=typeof r||"[object Function]"!==I.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var n,o=A.call(arguments,1),t=Math.max(0,r.length-o.length),i=[],c=0;c<t;c++)i.push("$"+c);if(n=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof n){var t=r.apply(this,o.concat(A.call(arguments)));return Object(t)===t?t:this}return r.apply(e,o.concat(A.call(arguments)))}),r.prototype){var u=function(){};u.prototype=r.prototype,n.prototype=new u,u.prototype=null}return n}).call(Function.call,Object.prototype.hasOwnProperty),T=RegExp.prototype.exec,z=Object.getOwnPropertyDescriptor,F=Object.prototype.toString,L="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,V=function(t){if(!t||"object"!=typeof t)return!1;if(!L)return"[object RegExp]"===F.call(t);var e=z(t,"lastIndex");return!(!e||!D(e,"value"))&&function(t){try{var e=t.lastIndex;return t.lastIndex=0,T.call(t),!0}catch(t){return!1}finally{t.lastIndex=e}}(t)},R="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),C=Object.prototype.toString,M=Array.prototype.concat,q=Object.defineProperty,H=q&&function(){var t={};try{for(var e in q(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}();P.supportsDescriptors=!!H;function U(){if(null!=this&&this!==Y(this))throw new B("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t}function W(){if(!G)throw new K("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=J(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return U}var X=P,Y=Object,B=TypeError,G=X.supportsDescriptors,J=Object.getOwnPropertyDescriptor,K=TypeError,N=X.supportsDescriptors,Q=Object.getOwnPropertyDescriptor,Z=Object.defineProperty,tt=TypeError,et=Object.getPrototypeOf,rt=/a/,nt=Function.call.bind(U);X(nt,{getPolyfill:W,implementation:U,shim:function(){if(!N||!et)throw new tt("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=W(),e=et(rt),r=Q(e,"flags");return r&&r.get===t||Z(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}});var ot=nt,it=Date.prototype.getDay,ct=Object.prototype.toString,ut="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,lt=function(t){return"object"==typeof t&&null!==t&&(ut?function(t){try{return it.call(t),!0}catch(t){return!1}}(t):"[object Date]"===ct.call(t))},at=Date.prototype.getTime;function pt(t,e,r){var n=r||{};return!(n.strict?!x(t,e):t!==e)||(!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?x(t,e):t==e:function(t,e,r){var n,o;if(typeof t!=typeof e)return!1;if(ft(t)||ft(e))return!1;if(t.prototype!==e.prototype)return!1;if(k(t)!==k(e))return!1;var i=V(t),c=V(e);if(i!==c)return!1;if(i||c)return t.source===e.source&&ot(t)===ot(e);if(lt(t)&&lt(e))return at.call(t)===at.call(e);var u=st(t),l=st(e);if(u!==l)return!1;if(u||l){if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}if(typeof t!=typeof e)return!1;try{var a=j(t),p=j(e)}catch(t){return!1}if(a.length!==p.length)return!1;for(a.sort(),p.sort(),n=a.length-1;0<=n;n--)if(a[n]!=p[n])return!1;for(n=a.length-1;0<=n;n--)if(o=a[n],!pt(t[o],e[o],r))return!1;return!0}(t,e,n))}function ft(t){return null==t}function st(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(0<t.length&&"number"!=typeof t[0]))}var yt=pt;function ht(t){return void 0!==t.oldValue&&("object"==typeof t.value?yt(t.value,t.oldValue):t.value===t.oldValue)}function gt(t){return""===t.value||void 0===t.value||null===t.value}function bt(t,e){if(!ht(e)){var r=[];!1===e.value||"false"===e.value?r.push(!1):r.push(!0),jt.setAutoPageview.apply(jt,r)}}function vt(r,e){if(!ht(e)&&!gt(e)){r.removeEventListeners&&"function"==typeof r.removeEventListeners&&r.removeEventListeners();var n=[],t=Object.keys(e.modifiers).map(function(t){if(e.modifiers[t])return t});if("object"==typeof e.value){var o=e.value;o.category&&n.push(o.category),o.action&&n.push(o.action),o.label&&n.push(o.label),o.value&&n.push(o.value),o.nodeid&&n.push(o.nodeid)}else"string"==typeof e.value&&(n=e.value.split(",")).forEach(function(t,e){return n[e]=t.trim()});t.length||t.push("click");var i=[];t.forEach(function(t,e){i[e]=function(){return jt.trackEvent.apply(jt,n)},r.addEventListener(t,i[e],!1)}),r.removeEventListeners=function(){t.forEach(function(t,e){r.removeEventListener(t,i[e])})}}}var dt=[],mt={bind:function(e,t){var r=dt.findIndex(function(t){return t===e}),n=-1!==r;if("none"!==e.style.display){if(n&&dt.splice(r,1),n||!ht(t)&&!gt(t)){var o=[];if("object"==typeof t.value){var i=t.value;i.content_url&&o.push(i.content_url),i.referer_url&&o.push(i.referer_url)}else"string"==typeof t.value&&t.value&&(o=t.value.split(",")).forEach(function(t,e){return o[e]=t.trim()});jt.trackPageview.apply(jt,o)}}else n||dt.push(e)},unbind:function(e,t){var r=dt.findIndex(function(t){return t===e});-1!==r&&dt.splice(r,1)}};mt.update=mt.bind;var wt={};wt.promise=new Promise(function(t,e){wt.resolve=t,wt.reject=e});var jt={_cache:[],_resolve:function(){wt.resolve()},_reject:function(){wt.reject()},_push:function(){this.debug(arguments),window._czc?window._czc.push.apply(window._czc,arguments):this._cache.push.apply(this._cache,arguments)},_createMethod:function(e){return function(){var t=Array.prototype.slice.apply(arguments);this._push(["_"+e].concat(t))}},debug:function(){},ready:function(){return wt.promise},install:function(t,e){var r=this;if(!this.install.installed){e.debug?this.debug=console.debug:this.debug=function(){};var n=null;if("object"==typeof e?(n=e.siteId,!1!==e.autoPageview&&(e.autoPageview=!0)):n=e,!n)return console.error("siteId is missing");this.install.installed=!0;var o=document.createElement("script"),i="https://s95.cnzz.com/z_stat.php?id="+n+"&web_id="+n;o.src=e.src||i,o.onload=function(){if(!window._czc)return console.error("loading uweb statistics script failed, please check src and siteId"),r._reject();r._resolve(),r._cache.forEach(function(t){window._czc.push(t)}),r._cache=[]},this.setAccount(e.siteId),this.setAutoPageview(e.autoPageview),document.body.appendChild(o),Object.defineProperty(t.prototype,"$uweb",{get:function(){return r}}),t.directive("auto-pageview",bt),t.directive("track-event",vt),t.directive("track-pageview",mt)}},patch:function(t){this[t]=this._createMethod(t)}};["trackPageview","trackEvent","setCustomVar","setAccount","setAutoPageview","deleteCustomVar"].forEach(function(t){return jt[t]=jt._createMethod(t)}),window.Vue&&(window.uweb=jt),t.default=jt,Object.defineProperty(t,"__esModule",{value:!0})});